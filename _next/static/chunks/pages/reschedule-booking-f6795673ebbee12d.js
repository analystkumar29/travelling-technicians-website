(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{4514:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reschedule-booking",function(){return n(7634)}])},7634:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return RescheduleBooking}});var s=n(5893),a=n(7294),o=n(1163),i=n(2081),c=n(5154);let getAvailableDates=()=>{let e=[],t=new Date;for(let n=1;n<=7;n++){let s=new Date(t);s.setDate(t.getDate()+n);let a=s.toISOString().split("T")[0],o=s.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});e.push({value:a,label:o})}return e},u=[{id:"09-11",label:"9:00 AM - 11:00 AM"},{id:"11-13",label:"11:00 AM - 1:00 PM"},{id:"13-15",label:"1:00 PM - 3:00 PM"},{id:"15-17",label:"3:00 PM - 5:00 PM"},{id:"17-19",label:"5:00 PM - 7:00 PM"},{id:"19-21",label:"7:00 PM - 9:00 PM"}];function RescheduleBooking(){var e;let t=(0,o.useRouter)(),{reference:n,token:f}=t.query,[p,h]=(0,a.useState)(""),[g,y]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[N,S]=(0,a.useState)(!1),[E,P]=(0,a.useState)(!1),[C,D]=(0,a.useState)(!1),[T,I]=(0,a.useState)("loading"),[O,M]=(0,a.useState)("Loading your booking information..."),[A,B]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!n||!f)return;let validateToken=async()=>{try{await new Promise(e=>setTimeout(e,1500));let e="string"==typeof t.query.email?t.query.email:void 0;"string"==typeof n&&"string"==typeof f&&n.startsWith("TT")&&f.length>20?(B({reference:n,deviceType:"Mobile Phone",issue:"Screen Replacement",currentDate:"Monday, June 10, 2024",currentTime:"9:00 AM - 11:00 AM",address:"123 Main St, Vancouver, BC",email:e||void 0}),e&&w(e),I("ready"),M("")):(I("error"),M("Invalid or expired reschedule link. Please contact support."))}catch(e){console.error("Error validating reschedule request:",e),I("error"),M("Something went wrong while loading your booking. Please try again later.")}};validateToken()},[n,f,t.query.email]);let handleSubmit=async e=>{e.preventDefault();let t=!1;if(p||(S(!0),t=!0),g||(P(!0),t=!0),A.email||j||(D(!0),t=!0),!t){I("submitting");try{try{var n;let e=p?new Date(p).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}):"",t=(null===(n=u.find(e=>e.id===g))||void 0===n?void 0:n.label)||"",s=A.email||j||"customer@example.com";A.email||j||console.warn("No email found in booking data or form! Using fallback."),console.log("Sending reschedule confirmation email with data:",{to:s,name:"Customer",bookingReference:A.reference,deviceType:A.deviceType||"Device",service:A.issue,oldDate:A.currentDate,oldTime:A.currentTime,bookingDate:e,bookingTime:t,address:A.address});let a=await fetch("/api/send-reschedule-confirmation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:s,name:"Customer",bookingReference:A.reference,deviceType:A.deviceType||"Device",brand:"",model:"",service:A.issue,oldDate:A.currentDate,oldTime:A.currentTime,bookingDate:e,bookingTime:t,address:A.address,notes:b||""})});if(!a.ok){console.error("Failed to send reschedule confirmation email. Status:",a.status);let e=await a.text();throw console.error("Error response:",e),Error("Email API responded with status ".concat(a.status,": ").concat(e))}let o=await a.json();if(console.log("Email sending result:",o),!o.success)throw console.error("Email API reported failure:",o),Error("Email sending failed: ".concat(o.message||"Unknown error"))}catch(e){console.error("Failed to send reschedule confirmation email:",e),I("success"),M("Your booking has been successfully rescheduled, but we could not send a confirmation email. Please take note of your booking details.");return}I("success"),M("Your booking has been successfully rescheduled! A confirmation email will be sent shortly.")}catch(e){console.error("Error rescheduling booking:",e),I("error"),M("Failed to reschedule your booking. Please try again or contact support.")}}};return(0,s.jsx)(i.Z,{title:"Reschedule Booking | The Travelling Technicians",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-16 sm:px-6 sm:py-24 lg:px-8",children:(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-primary-50 px-6 py-4 border-b border-primary-100",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-primary-800",children:"Reschedule Your Booking"})}),(0,s.jsxs)("div",{className:"px-6 py-5",children:["loading"===T&&(0,s.jsx)("div",{className:"flex flex-col items-center text-center py-10",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-16 w-16 rounded-full bg-primary-200 flex items-center justify-center mb-4",children:(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-500"})}),(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:"Verifying Your Booking"}),(0,s.jsx)("p",{className:"text-gray-600",children:O})]})}),"error"===T&&(0,s.jsxs)("div",{className:"flex flex-col items-center text-center py-10",children:[(0,s.jsx)(c.G5m,{className:"h-16 w-16 text-red-500 mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Verification Failed"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:O}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-2",children:[(0,s.jsx)("button",{onClick:()=>t.push("/book-online"),className:"btn-outline",children:"Book Again"}),(0,s.jsx)("button",{onClick:()=>t.push("/contact"),className:"btn-primary",children:"Contact Support"})]})]}),"ready"===T&&A&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Current Booking Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Reference:"}),(0,s.jsx)("p",{className:"font-medium",children:A.reference})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Service:"}),(0,s.jsx)("p",{className:"font-medium",children:A.issue})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Current Date:"}),(0,s.jsx)("p",{className:"font-medium",children:A.currentDate})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Current Time:"}),(0,s.jsx)("p",{className:"font-medium",children:A.currentTime})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Address:"}),(0,s.jsx)("p",{className:"font-medium",children:A.address})]})]})]}),(0,s.jsxs)("form",{onSubmit:handleSubmit,children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Select New Date & Time"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"date",className:"block text-gray-700 font-medium mb-2",children:"New Date *"}),(0,s.jsxs)("select",{id:"date",className:"w-full px-4 py-3 border ".concat(N?"border-red-500 bg-red-50":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"),value:p,onChange:e=>{h(e.target.value),S(!1)},required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a date"}),getAvailableDates().map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),N&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Please select a date"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"time",className:"block text-gray-700 font-medium mb-2",children:"New Time *"}),(0,s.jsxs)("select",{id:"time",className:"w-full px-4 py-3 border ".concat(E?"border-red-500 bg-red-50":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"),value:g,onChange:e=>{y(e.target.value),P(!1)},required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a time"}),u.map(e=>(0,s.jsx)("option",{value:e.id,children:e.label},e.id))]}),E&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Please select a time"})]})]}),!A.email&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-gray-700 font-medium mb-2",children:"Your Email Address *"}),(0,s.jsx)("input",{type:"email",id:"email",className:"w-full px-4 py-3 border ".concat(C?"border-red-500 bg-red-50":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"),placeholder:"Enter your email for confirmation",value:j,onChange:e=>{w(e.target.value),D(!1)},required:!A.email}),C&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Please enter your email address"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You'll receive a confirmation email for your rescheduled booking"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"note",className:"block text-gray-700 font-medium mb-2",children:"Additional Notes (Optional)"}),(0,s.jsx)("textarea",{id:"note",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Any special requests or information about your reschedule...",value:b,onChange:e=>v(e.target.value)})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"btn-primary",children:"Confirm Reschedule"})})]})]}),"submitting"===T&&(0,s.jsxs)("div",{className:"flex flex-col items-center text-center py-10",children:[(0,s.jsx)(c.fCD,{className:"h-16 w-16 text-primary-500 animate-spin mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Processing Your Request"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Please wait while we update your booking..."})]}),"success"===T&&(0,s.jsxs)("div",{className:"flex flex-col items-center text-center py-10",children:[(0,s.jsx)(c.FJM,{className:"h-16 w-16 text-green-500 mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Booking Rescheduled!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:O}),(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg w-full max-w-md mb-6",children:(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"New Appointment:"}),(0,s.jsx)("p",{className:"text-gray-700",children:p&&new Date(p).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),(0,s.jsx)("p",{className:"text-gray-700",children:null===(e=u.find(e=>e.id===g))||void 0===e?void 0:e.label})]})}),(0,s.jsx)("button",{onClick:()=>t.push("/"),className:"btn-primary",children:"Return Home"})]})]})]})})})}},1163:function(e,t,n){e.exports=n(8355)},689:function(e,t,n){"use strict";n.d(t,{p:function(){return H}});var s,a,o,i,c,u,f,p,h=n(7294),g=n.t(h,2),y=Object.defineProperty,d=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r=(e,t,n)=>(d(e,"symbol"!=typeof t?t+"":t,n),n);let b=new class{constructor(){r(this,"current",this.detect()),r(this,"handoffState","pending"),r(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},l=(e,t)=>{b.isServer?(0,h.useEffect)(e,t):(0,h.useLayoutEffect)(e,t)},use_event_o=function(e){let t;let n=(t=(0,h.useRef)(e),l(()=>{t.current=e},[e]),t);return h.useCallback((...e)=>n.current(...e),[n])},v=null!=(f=h.useId)?f:function(){let e=function(){let e;let t=(e="undefined"==typeof document,(0,g.useSyncExternalStore)(()=>()=>{},()=>!1,()=>!e)),[n,s]=h.useState(b.isHandoffComplete);return n&&!1===b.isHandoffComplete&&s(!1),h.useEffect(()=>{!0!==n&&s(!0)},[n]),h.useEffect(()=>b.handoff(),[]),!t&&n}(),[t,n]=h.useState(e?()=>b.nextId():null);return l(()=>{null===t&&n(b.nextId())},[t]),null!=t?""+t:void 0};function use_resolve_button_type_i(e){var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";if("string"==typeof n&&"button"===n.toLowerCase())return"button"}let j=Symbol();function use_sync_refs_y(...e){let t=(0,h.useRef)(e);(0,h.useEffect)(()=>{t.current=e},[e]);let n=use_event_o(e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)});return e.every(e=>null==e||(null==e?void 0:e[j]))?void 0:n}let w=(0,h.createContext)(null);w.displayName="OpenClosedContext";var N=((s=N||{})[s.Open=1]="Open",s[s.Closed=2]="Closed",s[s.Closing=4]="Closing",s[s.Opening=8]="Opening",s);function open_closed_s({value:e,children:t}){return h.createElement(w.Provider,{value:e},t)}function match_u(e,t,...n){if(e in t){let s=t[e];return"function"==typeof s?s(...n):s}let s=Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,match_u),s}function class_names_t(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}var S=((a=S||{})[a.None=0]="None",a[a.RenderStrategy=1]="RenderStrategy",a[a.Static=2]="Static",a),E=((o=E||{})[o.Unmount=0]="Unmount",o[o.Hidden=1]="Hidden",o);function render_C({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:a,visible:o=!0,name:i,mergeRefs:c}){c=null!=c?c:k;let u=R(t,e);if(o)return m(u,n,s,i,c);let f=null!=a?a:0;if(2&f){let{static:e=!1,...t}=u;if(e)return m(t,n,s,i,c)}if(1&f){let{unmount:e=!0,...t}=u;return match_u(e?0:1,{0:()=>null,1:()=>m({...t,hidden:!0,style:{display:"none"}},n,s,i,c)})}return m(u,n,s,i,c)}function m(e,t={},n,s,a){let{as:o=n,children:i,refName:c="ref",...u}=F(e,["unmount","static"]),f=void 0!==e.ref?{[c]:e.ref}:{},p="function"==typeof i?i(t):i;"className"in u&&u.className&&"function"==typeof u.className&&(u.className=u.className(t));let g={};if(t){let e=!1,n=[];for(let[s,a]of Object.entries(t))"boolean"==typeof a&&(e=!0),!0===a&&n.push(s);e&&(g["data-headlessui-state"]=n.join(" "))}if(o===h.Fragment&&Object.keys(x(u)).length>0){if(!(0,h.isValidElement)(p)||Array.isArray(p)&&p.length>1)throw Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(u).map(e=>`  - ${e}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join(`
`)].join(`
`));let e=p.props,t="function"==typeof(null==e?void 0:e.className)?(...t)=>class_names_t(null==e?void 0:e.className(...t),u.className):class_names_t(null==e?void 0:e.className,u.className),n=t?{className:t}:{};return(0,h.cloneElement)(p,Object.assign({},R(p.props,x(F(u,["ref"]))),g,f,{ref:a(p.ref,f.ref)},n))}return(0,h.createElement)(o,Object.assign({},F(u,["ref"]),o!==h.Fragment&&f,o!==h.Fragment&&g),p)}function render_I(){let e=(0,h.useRef)([]),t=(0,h.useCallback)(t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)},[]);return(...n)=>{if(!n.every(e=>null==e))return e.current=n,t}}function k(...e){return e.every(e=>null==e)?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function R(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let s of e)for(let e in s)e.startsWith("on")&&"function"==typeof s[e]?(null!=n[e]||(n[e]=[]),n[e].push(s[e])):t[e]=s[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(e=>[e,void 0])));for(let e in n)Object.assign(t,{[e](t,...s){for(let a of n[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;a(t,...s)}}});return t}function U(e){var t;return Object.assign((0,h.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function x(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function F(e,t=[]){let n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}let P=null!=(p=h.startTransition)?p:function(e){e()};var C=((i=C||{}).Space=" ",i.Enter="Enter",i.Escape="Escape",i.Backspace="Backspace",i.Delete="Delete",i.ArrowLeft="ArrowLeft",i.ArrowUp="ArrowUp",i.ArrowRight="ArrowRight",i.ArrowDown="ArrowDown",i.Home="Home",i.End="End",i.PageUp="PageUp",i.PageDown="PageDown",i.Tab="Tab",i),D=((c=D||{})[c.Open=0]="Open",c[c.Closed=1]="Closed",c),T=((u=T||{})[u.ToggleDisclosure=0]="ToggleDisclosure",u[u.CloseDisclosure=1]="CloseDisclosure",u[u.SetButtonId=2]="SetButtonId",u[u.SetPanelId=3]="SetPanelId",u[u.LinkPanel=4]="LinkPanel",u[u.UnlinkPanel=5]="UnlinkPanel",u);let I={0:e=>({...e,disclosureState:match_u(e.disclosureState,{0:1,1:0})}),1:e=>1===e.disclosureState?e:{...e,disclosureState:1},4:e=>!0===e.linkedPanel?e:{...e,linkedPanel:!0},5:e=>!1===e.linkedPanel?e:{...e,linkedPanel:!1},2:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},3:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},O=(0,h.createContext)(null);function _(e){let t=(0,h.useContext)(O);if(null===t){let t=Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,_),t}return t}O.displayName="DisclosureContext";let M=(0,h.createContext)(null);M.displayName="DisclosureAPIContext";let A=(0,h.createContext)(null);function ee(e,t){return match_u(t.type,I,e,t)}A.displayName="DisclosurePanelContext";let B=h.Fragment,L=S.RenderStrategy|S.Static,H=Object.assign(U(function(e,t){let{defaultOpen:n=!1,...s}=e,a=(0,h.useRef)(null),o=use_sync_refs_y(t,function(e,t=!0){return Object.assign(e,{[j]:t})}(e=>{a.current=e},void 0===e.as||e.as===h.Fragment)),i=(0,h.useRef)(null),c=(0,h.useRef)(null),u=(0,h.useReducer)(ee,{disclosureState:n?0:1,linkedPanel:!1,buttonRef:c,panelRef:i,buttonId:null,panelId:null}),[{disclosureState:f,buttonId:p},g]=u,y=use_event_o(e=>{g({type:1});let t=b.isServer?null:a instanceof Node?a.ownerDocument:null!=a&&a.hasOwnProperty("current")&&a.current instanceof Node?a.current.ownerDocument:document;if(!t||!p)return;let n=e?e instanceof HTMLElement?e:e.current instanceof HTMLElement?e.current:t.getElementById(p):t.getElementById(p);null==n||n.focus()}),v=(0,h.useMemo)(()=>({close:y}),[y]),w=(0,h.useMemo)(()=>({open:0===f,close:y}),[f,y]);return h.createElement(O.Provider,{value:u},h.createElement(M.Provider,{value:v},h.createElement(open_closed_s,{value:match_u(f,{0:N.Open,1:N.Closed})},render_C({ourProps:{ref:o},theirProps:s,slot:w,defaultTag:B,name:"Disclosure"}))))}),{Button:U(function(e,t){let n=v(),{id:s=`headlessui-disclosure-button-${n}`,...a}=e,[o,i]=_("Disclosure.Button"),c=(0,h.useContext)(A),u=null!==c&&c===o.panelId,f=(0,h.useRef)(null),p=use_sync_refs_y(f,t,u?null:o.buttonRef),g=render_I();(0,h.useEffect)(()=>{if(!u)return i({type:2,buttonId:s}),()=>{i({type:2,buttonId:null})}},[s,i,u]);let y=use_event_o(e=>{var t;if(u){if(1===o.disclosureState)return;switch(e.key){case C.Space:case C.Enter:e.preventDefault(),e.stopPropagation(),i({type:0}),null==(t=o.buttonRef.current)||t.focus()}}else switch(e.key){case C.Space:case C.Enter:e.preventDefault(),e.stopPropagation(),i({type:0})}}),b=use_event_o(e=>{e.key===C.Space&&e.preventDefault()}),j=use_event_o(t=>{var n;(function(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let s=(null==t?void 0:t.getAttribute("disabled"))==="";return!(s&&function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&s})(t.currentTarget)||e.disabled||(u?(i({type:0}),null==(n=o.buttonRef.current)||n.focus()):i({type:0}))}),w=(0,h.useMemo)(()=>({open:0===o.disclosureState}),[o]),N=function(e,t){let[n,s]=(0,h.useState)(()=>use_resolve_button_type_i(e));return l(()=>{s(use_resolve_button_type_i(e))},[e.type,e.as]),l(()=>{n||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&s("button")},[n,t]),n}(e,f);return render_C({mergeRefs:g,ourProps:u?{ref:p,type:N,onKeyDown:y,onClick:j}:{ref:p,id:s,type:N,"aria-expanded":0===o.disclosureState,"aria-controls":o.linkedPanel?o.panelId:void 0,onKeyDown:y,onKeyUp:b,onClick:j},theirProps:a,slot:w,defaultTag:"button",name:"Disclosure.Button"})}),Panel:U(function(e,t){let n=v(),{id:s=`headlessui-disclosure-panel-${n}`,...a}=e,[o,i]=_("Disclosure.Panel"),{close:c}=function K(e){let t=(0,h.useContext)(M);if(null===t){let t=Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,K),t}return t}("Disclosure.Panel"),u=render_I(),f=use_sync_refs_y(t,o.panelRef,e=>{P(()=>i({type:e?4:5}))});(0,h.useEffect)(()=>(i({type:3,panelId:s}),()=>{i({type:3,panelId:null})}),[s,i]);let p=(0,h.useContext)(w),g=null!==p?(p&N.Open)===N.Open:0===o.disclosureState,y=(0,h.useMemo)(()=>({open:0===o.disclosureState,close:c}),[o,c]);return h.createElement(A.Provider,{value:o.panelId},render_C({mergeRefs:u,ourProps:{ref:f,id:s},theirProps:a,slot:y,defaultTag:"div",features:L,visible:g,name:"Disclosure.Panel"}))})})},3407:function(e,t,n){"use strict";var s=n(7294);let a=s.forwardRef(function({title:e,titleId:t,...n},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))});t.Z=a},1415:function(e,t,n){"use strict";var s=n(7294);let a=s.forwardRef(function({title:e,titleId:t,...n},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});t.Z=a}},function(e){e.O(0,[81,774,888,179],function(){return e(e.s=4514)}),_N_E=e.O()}]);